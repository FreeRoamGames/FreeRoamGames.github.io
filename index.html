<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VR Game with Hands</title>
    <meta name="description" content="A-Frame VR Game with Hands" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.loaders.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #ECECEC">
      <!-- Kamera + Bewegung -->
      <a-entity id="player" position="0 1.6 0">
        <a-entity camera look-controls wasd-controls></a-entity>
      </a-entity>

      <!-- Licht -->
      <a-entity light="type: ambient; color: #ffffff"></a-entity>
      <a-entity light="type: directional; intensity: 0.5" position="1 3 2"></a-entity>

      <!-- Boden -->
      <a-plane rotation="-90 0 0" width="30" height="30" color="#7BC8A4"></a-plane>

      <!-- Ziele -->
      <a-box id="target1" position="2 1 -5" color="#EF2D5E" class="clickable"></a-box>
      <a-box id="target2" position="-2 1 -6" color="#4CC3D9" class="clickable"></a-box>

      <!-- Punktestand -->
      <a-text id="scoreText" value="Score: 0" position="-0.9 2 -1" width="2" color="#000"></a-text>

      <!-- Cursor für Desktop-VR -->
      <a-entity 
        cursor="fuse: true; fuseTimeout: 500"
        position="0 0 -1"
        geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
        material="color: black; shader: flat"
        raycaster="objects: .clickable"
        camera
      ></a-entity>

      <!-- Realistische Hände -->
      <a-entity
        id="leftHand"
        gltf-model="https://cdn.aframe.io/examples/ar/models/hand/hand-left.glb"
        scale="0.2 0.2 0.2"
        tracked-controls="hand: left; controller: 0"
        rotation="0 0 0"
      ></a-entity>

      <a-entity
        id="rightHand"
        gltf-model="https://cdn.aframe.io/examples/ar/models/hand/hand-right.glb"
        scale="0.2 0.2 0.2"
        tracked-controls="hand: right; controller: 0"
        rotation="0 0 0"
      ></a-entity>
    </a-scene>

    <script>
      let score = 0;
      const boxes = [document.querySelector("#target1"), document.querySelector("#target2")];
      const scoreText = document.querySelector("#scoreText");

      boxes.forEach((box) => {
        box.addEventListener("click", () => {
          box.setAttribute("visible", false);
          score += 1;
          scoreText.setAttribute("value", `Score: ${score}`);
        });
      });

      // Ziele erscheinen zufällig
      setInterval(() => {
        const box = boxes[Math.floor(Math.random() * boxes.length)];
        if (!box.getAttribute("visible")) {
          const x = (Math.random() - 0.5) * 10;
          const z = -Math.random() * 10 - 2;
          box.setAttribute("position", `${x} 1 ${z}`);
          box.setAttribute("visible", true);
        }
      }, 2000);
    </script>
  </body>
</html>
