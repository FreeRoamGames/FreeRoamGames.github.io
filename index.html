<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Lucid Dreaming VR</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #000000" embedded>
      <a-entity id="sky" geometry="primitive: sphere; radius: 5000"
                material="side: back; color: #000000"></a-entity>
    </a-scene>

    <script>
      // === Einstellungen ===
      const intervalMinutes = 10;        // Dauer bis zum nÃ¤chsten Blinken (in Minuten)
      const blinkCount = 3;              // Wie oft soll geblinkt werden
      const redBrightness = 1.0;         // Helligkeit von Rot (0.0 bis 1.0)
      const blinkDuration = 300;         // Dauer eines einzelnen Blinks (in ms)

      const sky = document.getElementById('sky');
      const originalColor = '#000000';
      const blinkColor = `rgb(${Math.floor(255 * redBrightness)}, 0, 0)`;

      function blinkSequence() {
        let count = 0;

        const blink = () => {
          sky.setAttribute('animation__color', {
            property: 'material.color',
            to: blinkColor,
            dur: blinkDuration,
            easing: 'easeInOutQuad'
          });

          setTimeout(() => {
            sky.setAttribute('animation__color', {
              property: 'material.color',
              to: originalColor,
              dur: blinkDuration,
              easing: 'easeInOutQuad'
            });
          }, blinkDuration);

          count++;
          if (count < blinkCount) {
            setTimeout(blink, blinkDuration * 2);
          }
        };

        blink();
      }

      // Intervall in Millisekunden
      const interval = intervalMinutes * 60 * 1000;
      setInterval(blinkSequence, interval);
    </script>
  </body>
</html>
