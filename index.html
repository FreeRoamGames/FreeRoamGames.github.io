<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VR Game Template</title>
    <meta name="description" content="A-Frame VR Game Template" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Kamera + Steuerung -->
      <a-entity id="player" camera wasd-controls look-controls position="0 1.6 0"></a-entity>

      <!-- Licht -->
      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <a-entity light="type: directional; intensity: 0.8" position="1 1 0.5"></a-entity>

      <!-- Boden -->
      <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>

      <!-- Interaktive Boxen -->
      <a-box id="target1" position="2 1 -5" color="#EF2D5E" class="clickable" event-set__click="_event: click; visible: false"></a-box>
      <a-box id="target2" position="-2 1 -6" color="#4CC3D9" class="clickable" event-set__click="_event: click; visible: false"></a-box>

      <!-- Textanzeige -->
      <a-text id="scoreText" value="Score: 0" position="-0.9 2 -1" width="2" color="#FFF"></a-text>

      <!-- Cursor für VR-Interaktion -->
      <a-entity
        cursor="fuse: true; fuseTimeout: 500"
        position="0 0 -1"
        geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
        material="color: black; shader: flat"
        raycaster="objects: .clickable"
      ></a-entity>
    </a-scene>

    <script>
      let score = 0;
      const boxes = [document.querySelector("#target1"), document.querySelector("#target2")];
      const scoreText = document.querySelector("#scoreText");

      boxes.forEach((box) => {
        box.addEventListener("click", () => {
          box.setAttribute("visible", false);
          score += 1;
          scoreText.setAttribute("value", `Score: ${score}`);
        });
      });

      // Boxen erscheinen zufällig
      setInterval(() => {
        const box = boxes[Math.floor(Math.random() * boxes.length)];
        if (!box.getAttribute("visible")) {
          const x = (Math.random() - 0.5) * 10;
          const z = -Math.random() * 10 - 2;
          box.setAttribute("position", `${x} 1 ${z}`);
          box.setAttribute("visible", true);
        }
      }, 2000);
    </script>
  </body>
</html>
